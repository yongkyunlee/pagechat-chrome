<div class='container'>
    <div>
        Page Chat
    </div>
    <div>
        <p>Current URL</p>
        <p>{{url}}</p>
        <div>
            {{ (authService.afAuth.user | async)?.uid}}
        </div>
    </div>
    <div *ngIf="authLoaded">
        <div *ngIf="(authService.afAuth.user | async) === null">
            <div>
                <label>Email</label>
                <input [(ngModel)]="email" type="email">
            </div>
            <div>
                <label>Passowrd</label>
                <input [(ngModel)]="password" type="password">
            </div>
            <div>
                <button (click)="signInWithEmail()">
                    Sign In
                </button>
                <button (click)="signUpWithEmail()">
                    SignUp
                </button>
            </div>
            <div>
                <button (click)='authService.signInWithGoogle()'>
                    Sign in with Google
                </button>
            </div>
        </div>

        <div>
            <p>Friends List</p>
            <div *ngFor='let friend of friends'>
                {{ friend.uid }}
            </div>
        </div>
        <div>
            <p>Online Friends</p>
            <div *ngFor='let user of onlineUsers'>
                <div *ngIf='user.isFriend'>
                    {{ user.uid }}
                </div>
            </div>
        </div>

        <div>
            <p>Online Users</p>
            <div *ngFor='let user of onlineUsers'>
                <div *ngIf='!user.isFriend'>
                    {{ user.uid  }}
                </div>
            </div>
        </div>
        
        <div *ngIf="authService.afAuth.user | async">
            <input [(ngModel)]="friendUid" type="text">
            <button (click)="addFriend()">
                Add Friend
            </button>
            <button (click)='authService.signOut()'
                    *ngIf='authService.afAuth.user | async'>
                Sign Out
            </button>
        </div>


        <!-- TODO replace this with loop of active users -->
        <div *ngIf='!_chatService.inchat'>
            <br>
            <button (click)='updateRoom("JAILlJfkA0N1zirmemAXrEG4Hex1")'>
                    Inertial Chowder (click to talk)
            </button>
            <br>
            <button (click)='updateRoom("aqcEVGBVIuhz1XFrVPNvnJ6HAOJ3")'>
                    Bechtel 214 (click to talk)
            </button>
            <br>
            <br>
        </div>


        <!-- show open chat button if chat window is closed, and logged in -->
        <button (click)='closeChat()'
                *ngIf='_chatService.inchat && (authService.afAuth.user | async)'>
            Close Chat
        </button>
        
        <!-- show open chat button if chat window is open, and logged in -->
        <button (click)='openChat()'
        *ngIf='!_chatService.inchat && (authService.afAuth.user | async)'>
            Open Last Chat
        </button>
        
        <!-- use inchat to close the window if user selects to close -->
        <app-chat *ngIf='_chatService.inchat && authService.afAuth.user | async'></app-chat>

    </div>
    
    <!-- use above login method instead -->
    <!-- <app-login></app-login> -->

    
</div>

<!-- <router-outlet></router-outlet> -->